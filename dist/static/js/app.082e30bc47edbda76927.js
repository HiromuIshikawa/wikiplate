webpackJsonp([1],{"1/oy":function(t,e){},"7LE+":function(t,e){},"9M+g":function(t,e){},AeHL:function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("Xxa5"),n=a.n(i),r=a("woOf"),l=a.n(r),o=a("exGp"),c=a.n(o),m=a("mtWM"),u=a.n(m),d="https://wikiplate.herokuapp.com/api",p={template:{infobox:{title:"",arg:[],url:""},sections:[],wiki:""},similars:[],loading:!1,message:""},v={getTemplate:function(t){var e=this;return c()(n.a.mark(function a(){var s,i,r,o,c,m;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.loading=!0,e.next=3,u.a.get(d+"/template",{params:{keywords:t}}).catch(function(){console.log("template error")});case 3:if("Success"!==(s=e.sent).data.result){e.next=16;break}return p.message="",e.next=8,u.a.get(d+"/similars").catch(function(){console.log("similars error")});case 8:for(i=e.sent,r=s.data,o=i.data.similars,c=0,m=o.length;c<m;++c)o[c].ib_title===r.infobox.title?o[c]._rowVariant="success":o[c]._rowVariant="";p.template=l()({},r),p.similars=l()([],o),e.next=19;break;case 16:p.message="類似記事が抽出できませんでした．",p.template={infobox:{title:"",arg:[],url:""},sections:[],wiki:""},p.similars=[];case 19:p.loading=!1;case 20:case"end":return e.stop()}},a,e)}))()},regenerateTemplate:function(t){var e=this;return c()(n.a.mark(function a(){var s,i,r,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.loading=!0,e.next=3,u.a.get(d+"/regenerate",{params:{infobox:t}}).catch(function(){console.log("template error")});case 3:if("Success"===(s=e.sent).data.result){for(p.message="",i=s.data,r=0,o=p.similars.length;r<o;++r)p.similars[r].ib_title===i.infobox.title?p.similars[r]._rowVariant="success":p.similars[r]._rowVariant="";p.template=l()({},i)}else p.message="記事テンプレート生成に失敗しました．",p.template={infobox:{title:"",arg:[],url:""},sections:[],wiki:""};p.loading=!1;case 6:case"end":return e.stop()}},a,e)}))()}},f={state:p,actions:v},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sidebar"},[e("router-link",{staticClass:"sidebar-item",attrs:{tag:"div",to:{name:"Template"},exact:""}},[this._v("記事テンプレート")]),this._v(" "),e("router-link",{staticClass:"sidebar-item",attrs:{tag:"div",to:{name:"Similars"}}},[this._v("類似記事")])],1)},staticRenderFns:[]};var g=a("VU/8")({name:"SideBar"},h,!1,function(t){a("AeHL")},"data-v-8d71bd7e",null).exports,b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("router-link",{attrs:{to:{name:"Template"}}},[a("b-navbar-brand",{attrs:{tag:"h1"}},[t._v("Wikiplate")])],1),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-form",{staticClass:"form"},[a("b-form-input",{staticClass:"col-sm-8 mr-sm-2",attrs:{size:"sm",type:"text",placeholder:"キーワード(城:史跡)"},model:{value:t.privateState.keywords,callback:function(e){t.$set(t.privateState,"keywords",e)},expression:"privateState.keywords"}}),t._v(" "),a("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm"},on:{click:t.create}},[t._v("作成")])],1)],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")({data:function(){return{privateState:{keywords:""}}},methods:{create:function(){this.$emit("create",this.privateState.keywords),this.$router.push({name:"Template"})}}},b,!1,function(t){a("kv8b")},null,null).exports,y={name:"SyncLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,height:this.size,width:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-syncStretchDelay",animationDuration:"0.6s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.07s"},spinnerDelay2:{animationDelay:"0.14s"},spinnerDelay3:{animationDelay:"0.21s"}}}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],staticClass:"v-spinner"},[e("div",{staticClass:"v-sync v-sync1",style:[this.spinnerStyle,this.spinnerDelay1]}),e("div",{staticClass:"v-sync v-sync2",style:[this.spinnerStyle,this.spinnerDelay2]}),e("div",{staticClass:"v-sync v-sync3",style:[this.spinnerStyle,this.spinnerDelay3]})])},staticRenderFns:[]};var w=a("VU/8")(y,k,!1,function(t){a("cJQ1")},null,null).exports,x=(a("uMhA"),{name:"App",components:{SideBar:g,NavBar:_,SyncLoader:w},data:function(){return{sharedState:f.state,color:"#5bc0de",size:"20px",margin:"10px",radius:"2px"}},methods:{create:function(t){f.actions.getTemplate(t)},regenerate:function(t){f.actions.regenerateTemplate(t)}}}),S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav-bar",{staticClass:"navbar",on:{create:t.create}}),t._v(" "),a("b-container",{staticClass:"main-container"},[a("b-row",{staticClass:"main-row"},[a("b-col",{staticClass:"sidebar-col",attrs:{cols:"12",sm:"2"}},[a("side-bar")],1),t._v(" "),t.sharedState.loading?a("b-col",{staticClass:"loading-col",attrs:{cols:"12",sm:"10"}},[a("sync-loader",{staticClass:"loader",attrs:{loading:t.sharedState.loading,color:t.color,size:t.size,margin:t.margin}})],1):a("b-col",{staticClass:"main-content-col",attrs:{cols:"12",sm:"10"}},[a("router-view",{on:{regenerate:t.regenerate}})],1)],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(x,S,!1,function(t){a("ldgM")},null,null).exports,T=a("/ocq"),F={name:"TemplateEditor",data:function(){return{state:f.state,sharedTemplate:f.state.template}},computed:{url:function(){return this.sharedTemplate.infobox.url},sectionFlag:function(){return this.sharedTemplate.sections.length>0},messageFlag:function(){return this.state.message.length>0}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template"},[a("h1",[t._v("記事テンプレート")]),t._v(" "),t.messageFlag?a("p",{staticClass:"message"},[t._v(t._s(t.state.message))]):t._e(),t._v(" "),a("b-row",{staticClass:"template-row"},[a("b-col",{staticClass:"template-info",attrs:{cols:"12",sm:"4"}},[a("p",[a("b",[t._v("Infobox:")]),t._v(" "),a("a",{attrs:{href:t.url,target:"_blank"}},[t._v(t._s(t.sharedTemplate.infobox.title))])]),t._v(" "),a("p",[a("b",[t._v("章構成:")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.sectionFlag,expression:"sectionFlag"}],staticClass:"section-table"},t._l(t.sharedTemplate.sections,function(e,s){return a("div",{key:e},[t._v(t._s(s+1)+". "+t._s(e))])}))]),t._v(" "),a("b-col",{staticClass:"wiki-template",attrs:{cols:"12",sm:"8"}},[a("p",[a("b",[t._v("wikiテンプレート:")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sharedTemplate.wiki,expression:"sharedTemplate.wiki"}],attrs:{name:"wiki"},domProps:{value:t.sharedTemplate.wiki},on:{input:function(e){e.target.composing||t.$set(t.sharedTemplate,"wiki",e.target.value)}}})])],1)],1)},staticRenderFns:[]};var V=a("VU/8")(F,D,!1,function(t){a("RVx/")},"data-v-2cdea1da",null).exports,$={name:"SimilarsList",data:function(){return{sharedSimilars:f.state.similars,outlined:!0,ibFields:[{key:"ib_title",label:"Infobox"},{key:"similars",label:"類似記事数"},{key:"show_similars",label:""}],similarsFields:[{key:"title",label:"記事名"},{key:"sections",label:"章構成"}]}},methods:{regenerate:function(t){this.$emit("regenerate",t),this.$router.push({name:"Template"})}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"similars"},[a("h1",[t._v("類似記事")]),t._v(" "),a("b-table",{attrs:{id:"similars-table",items:t.sharedSimilars,fields:t.ibFields},scopedSlots:t._u([{key:"ib_title",fn:function(e){return[a("a",{attrs:{href:"https://ja.wikipedia.org/wiki/"+e.value,target:"_blank"}},[t._v(t._s(e.value))])]}},{key:"similars",fn:function(e){return[t._v("\n      "+t._s(e.value.length)+"ページ\n    ")]}},{key:"show_similars",fn:function(e){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        類似記事を"+t._s(e.detailsShowing?"隠す":"表示")+"\n      ")]),t._v(" "),a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){t.regenerate(e.item.ib_title)}}},[t._v("\n        記事テンプレート再生成\n      ")])]}},{key:"row-details",fn:function(e){return[a("b-table",{attrs:{id:"similars-table",items:e.item.similars,fields:t.similarsFields,outlined:t.outlined},scopedSlots:t._u([{key:"title",fn:function(e){return[a("a",{attrs:{href:"https://ja.wikipedia.org/wiki/"+e.value,target:"_blank"}},[t._v(t._s(e.value))])]}},{key:"sections",fn:function(e){return[t._v("\n          "+t._s(e.value.join(", "))+"\n        ")]}}])})]}}])},[a("template",{slot:"table-caption"},[t._v("\n      "+t._s(t.sharedSimilars.length)+" 種類の Infobox が存在しています．\n    ")])],2)],1)},staticRenderFns:[]};var E=a("VU/8")($,z,!1,function(t){a("7LE+")},"data-v-bddf6c9e",null).exports;s.a.use(T.a);var M=new T.a({mode:"history",routes:[{path:"/",name:"Template",component:V},{path:"/similars",name:"Similars",component:E}]}),R=(a("Jmt5"),a("9M+g"),a("e6fC"));s.a.use(R.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:M,components:{App:C},template:"<App/>"})},"RVx/":function(t,e){},cJQ1:function(t,e){},kv8b:function(t,e){},ldgM:function(t,e){},uMhA:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.082e30bc47edbda76927.js.map